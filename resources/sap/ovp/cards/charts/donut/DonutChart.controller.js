(function(){"use strict";sap.ui.controller("sap.ovp.cards.charts.donut.DonutChart",{onInit:function(){var v=this.getView().byId("donutChartCard");if(v){v.attachBrowserEvent("click",this.onHeaderClick.bind(this));}this.delegate1={onBeforeRendering:function(){this.setBusy(true);}};this.delegate2={onAfterRendering:function(){this.setBusy(false);}};},onBeforeRendering:function(){var u=sap.ovp.cards.charts.Utils;u.validateCardConfiguration(this);var m=[];var d=[];var v=this.getView().byId("donutChartCard");if(!v){jQuery.sap.log.error(u.constants.ERROR_NO_CHART+": ("+this.getView().getId()+")");}else{v.addEventDelegate(this.delegate1,v);var b=v.getDataset().getBinding("data");b.attachDataReceived(jQuery.proxy(this.onDataReceived,this));sap.ovp.cards.charts.Utils.validateMeasuresDimensions(v,"Donut");var e=this.getCardPropertiesModel().getProperty("/entityType");var c=u.getAllColumnLabels(e);var a=v.getDataset().getMeasures();var f=v.getDataset().getDimensions();m.push(a[0].getName());var g=c[f[0].getName()];d.push(g?g:f[0].getName());v.removeAllFeeds();v.addFeed(new sap.viz.ui5.controls.common.feeds.FeedItem({'uid':"size",'type':"Measure",'values':m}));v.addFeed(new sap.viz.ui5.controls.common.feeds.FeedItem({'uid':"color",'type':"Dimension",'values':d}));v.setVizProperties({size:{title:{visible:false}},color:{title:{visible:false}},legend:{isScrollable:false},title:{visible:false},interaction:{noninteractiveMode:true,selectability:{legendSelection:false,axisLabelSelection:false,mode:"NONE",plotLassoSelection:false,plotStdSelection:false}}});u.formatChartYaxis();}},onDataReceived:function(e){var v=this.getView().byId("donutChartCard");v.addEventDelegate(this.delegate2,v);sap.ovp.cards.charts.Utils.checkNoData(e,this.getCardContentContainer(),v);}});})();
