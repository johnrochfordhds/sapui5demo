define("tinymce/pasteplugin/Quirks",["tinymce/Env","tinymce/util/Tools","tinymce/pasteplugin/WordFilter","tinymce/pasteplugin/Utils"],function(E,T,W,U){"use strict";return function(a){function b(f){a.on('BeforePastePreProcess',function(e){e.content=f(e.content);});}function r(h){if(!W.isWordContent(h)){return h;}var d=[];T.each(a.schema.getBlockElements(),function(f,g){d.push(g);});var e=new RegExp('(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?('+d.join('|')+')[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*','g');h=U.filter(h,[[e,'$1']]);h=U.filter(h,[[/<br><br>/g,'<BR><BR>'],[/<br>/g,' '],[/<BR><BR>/g,'<br>']]);return h;}function c(d){if(W.isWordContent(d)){return d;}var w=a.settings.paste_webkit_styles;if(a.settings.paste_remove_styles_if_webkit===false||w=="all"){return d;}if(w){w=w.split(/[, ]/);}if(w){var e=a.dom,n=a.selection.getNode();d=d.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(f,g,v,h){var j=e.parseStyle(v,'span'),o={};if(w==="none"){return g+h;}for(var i=0;i<w.length;i++){var k=j[w[i]],l=e.getStyle(n,w[i],true);if(/color/.test(w[i])){k=e.toHex(k);l=e.toHex(l);}if(l!=k){o[w[i]]=k;}}o=e.serializeStyle(o,'span');if(o){return g+' style="'+o+'"'+h;}return g+h;});}else{d=d.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,'$1$3');}d=d.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(f,g,v,h){return g+' style="'+v+'"'+h;});return d;}if(E.webkit){b(c);}if(E.ie){b(r);}};});
