define("tinymce/codesampleplugin/Plugin",["tinymce/Env","tinymce/PluginManager","tinymce/codesampleplugin/Prism","tinymce/codesampleplugin/Dialog","tinymce/codesampleplugin/Utils"],function(E,P,a,D,U){var b,t=U.trimArg;P.add('codesample',function(c,p){var $=c.$;if(!E.ceFalse){return;}function l(){var d;if(!b){b=true;d=c.dom.create('link',{rel:'stylesheet',href:p+'/css/prism.css'});c.getDoc().getElementsByTagName('head')[0].appendChild(d);}}c.on('PreProcess',function(e){$('pre[contenteditable=false]',e.node).filter(t(U.isCodeSample)).each(function(i,d){var f=$(d),g=d.textContent;f.attr('class',$.trim(f.attr('class')));f.removeAttr('contentEditable');f.empty().append($('<code></code>').each(function(){this.textContent=g;}));});});c.on('SetContent',function(){var u=$('pre').filter(t(U.isCodeSample)).filter(function(i,e){return e.contentEditable!=="false";});if(u.length){c.undoManager.transact(function(){u.each(function(i,e){$(e).find('br').each(function(i,e){e.parentNode.replaceChild(c.getDoc().createTextNode('\n'),e);});e.contentEditable=false;e.innerHTML=c.dom.encode(e.textContent);a.highlightElement(e);e.className=$.trim(e.className);});});}});c.addCommand('codesample',function(){D.open(c);});c.addButton('codesample',{cmd:'codesample',title:'Insert/Edit code sample'});c.on('init',l);});});
