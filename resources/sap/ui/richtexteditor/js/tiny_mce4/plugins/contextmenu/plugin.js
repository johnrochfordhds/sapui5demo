tinymce.PluginManager.add('contextmenu',function(a){var m,c=a.settings.contextmenu_never_use_native;a.on('contextmenu',function(e){var b,d=a.getDoc();if(e.ctrlKey&&!c){return;}e.preventDefault();if(tinymce.Env.mac&&tinymce.Env.webkit){if(e.button==2&&d.caretRangeFromPoint){a.selection.setRng(d.caretRangeFromPoint(e.x,e.y));}}b=a.settings.contextmenu||'link image inserttable | cell row column deletetable';if(!m){var f=[];tinymce.each(b.split(/[ ,]/),function(n){var g=a.menuItems[n];if(n=='|'){g={text:n};}if(g){g.shortcut='';f.push(g);}});for(var i=0;i<f.length;i++){if(f[i].text=='|'){if(i===0||i==f.length-1){f.splice(i,1);}}}m=new tinymce.ui.Menu({items:f,context:'contextmenu',classes:'contextmenu'}).renderTo();a.on('remove',function(){m.remove();m=null;});}else{m.show();}var p={x:e.pageX,y:e.pageY};if(!a.inline){p=tinymce.DOM.getPos(a.getContentAreaContainer());p.x+=e.clientX;p.y+=e.clientY;}m.moveTo(p.x,p.y);});});
