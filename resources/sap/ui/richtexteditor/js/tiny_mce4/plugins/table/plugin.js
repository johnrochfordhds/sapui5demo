(function(a,u){"use strict";var m={};function b(c,e){var j,k=[];for(var i=0;i<c.length;++i){j=m[c[i]]||g(c[i]);if(!j){throw'module definition dependecy not found: '+c[i];}k.push(j);}e.apply(null,k);}function d(i,c,e){if(typeof i!=='string'){throw'invalid module definition, module id must be defined and be a string';}if(c===u){throw'invalid module definition, dependencies must be specified';}if(e===u){throw'invalid module definition, definition function must be specified';}b(c,function(){m[i]=e.apply(null,arguments);});}function f(i){return!!m[i];}function g(i){var t=a;var c=i.split(/[.\/]/);for(var e=0;e<c.length;++e){if(!t[c[e]]){return;}t=t[c[e]];}return t;}function h(c){var i,t,e,j,p;for(i=0;i<c.length;i++){t=a;e=c[i];j=e.split(/[.\/]/);for(var k=0;k<j.length-1;++k){if(t[j[k]]===u){t[j[k]]={};}t=t[j[k]];}t[j[j.length-1]]=m[e];}if(a.AMDLC_TESTS){p=a.privateModules||{};for(e in m){p[e]=m[e];}for(i=0;i<c.length;i++){delete p[c[i]];}a.privateModules=p;}}d("tinymce/tableplugin/Utils",["tinymce/Env"],function(E){function c(t,n){return parseInt(t.getAttribute(n)||1,10);}function p(e){if(!E.ie||E.ie>9){if(!e.hasChildNodes()){e.innerHTML='<br data-mce-bogus="1" />';}}}return{getSpanVal:c,paddCell:p};});d("tinymce/tableplugin/TableGrid",["tinymce/util/Tools","tinymce/Env","tinymce/tableplugin/Utils"],function(T,E,U){var e=T.each,j=U.getSpanVal;return function(k,t,s){var l,n,o,p,q=k.selection,v=q.dom;function w(){k.$('td[data-mce-selected],th[data-mce-selected]').removeAttr('data-mce-selected');}function z(c){return c===k.getBody();}function A(c,i){if(!c){return[];}i=T.map(i.split(','),function(r){return r.toLowerCase();});return T.grep(c.childNodes,function(c){return T.inArray(i,c.nodeName.toLowerCase())!==-1;});}function B(){var c=0;l=[];n=0;e(['thead','tbody','tfoot'],function(i){var r=A(t,i)[0];var e1=A(r,'tr');e(e1,function(tr,y){y+=c;e(A(tr,'td,th'),function(td,x){var x2,y2,f1,g1;if(l[y]){while(l[y][x]){x++;}}f1=j(td,'rowspan');g1=j(td,'colspan');for(y2=y;y2<y+f1;y2++){if(!l[y2]){l[y2]=[];}for(x2=x;x2<x+g1;x2++){l[y2][x2]={part:i,real:y2==y&&x2==x,elm:td,rowspan:f1,colspan:g1};}}n=Math.max(n,x+1);});});c+=e1.length;});}function C(c){k.fire('newrow',{node:c});return c;}function D(c){k.fire('newcell',{node:c});return c;}function F(c,i){c=c.cloneNode(i);c.removeAttribute('id');return c;}function G(x,y){var r;r=l[y];if(r){return r[x];}}function H(c,i,r){if(c){r=parseInt(r,10);if(r===1){c.removeAttribute(i,1);}else{c.setAttribute(i,r,1);}}}function I(c){return c&&(!!v.getAttrib(c.elm,'data-mce-selected')||c==s);}function J(){var r=[];e(t.rows,function(c){e(c.cells,function(i){if(v.getAttrib(i,'data-mce-selected')||(s&&i==s.elm)){r.push(c);return false;}});});return r;}function K(){var r=v.createRng();if(z(t)){return;}r.setStartAfter(t);r.setEndAfter(t);q.setRng(r);v.remove(t);}function L(c){var i,r={};if(k.settings.table_clone_elements!==false){r=T.makeMap((k.settings.table_clone_elements||'strong em b i span font h1 h2 h3 h4 h5 h6 p div').toUpperCase(),/[ ,]/);}T.walk(c,function(x){var y;if(x.nodeType==3){e(v.getParents(x.parentNode,null,c).reverse(),function(x){if(!r[x.nodeName]){return;}x=F(x,false);if(!i){i=y=x;}else if(y){y.appendChild(x);}y=x;});if(y){y.innerHTML=E.ie&&E.ie<10?'&nbsp;':'<br data-mce-bogus="1" />';}return false;}},'childNodes');c=F(c,false);D(c);H(c,'rowSpan',1);H(c,'colSpan',1);if(i){c.appendChild(i);}else{U.paddCell(c);}return c;}function M(){var r=v.createRng(),c;e(v.select('tr',t),function(i){if(i.cells.length===0){v.remove(i);}});if(v.select('tr',t).length===0){r.setStartBefore(t);r.setEndBefore(t);q.setRng(r);v.remove(t);return;}e(v.select('thead,tbody,tfoot',t),function(i){if(i.rows.length===0){v.remove(i);}});B();if(o){c=l[Math.min(l.length-1,o.y)];if(c){q.select(c[Math.min(c.length-1,o.x)].elm,true);q.collapse(true);}}}function N(x,y,i,e1){var tr,x2,r,c,h1;tr=l[y][x].elm.parentNode;for(r=1;r<=i;r++){tr=v.getNext(tr,'tr');if(tr){for(x2=x;x2>=0;x2--){h1=l[y+r][x2].elm;if(h1.parentNode==tr){for(c=1;c<=e1;c++){v.insertAfter(L(h1),h1);}break;}}if(x2==-1){for(c=1;c<=e1;c++){tr.insertBefore(L(tr.cells[0]),tr.cells[0]);}}}}}function O(){e(l,function(r,y){e(r,function(c,x){var e1,f1,i;if(I(c)){c=c.elm;e1=j(c,'colspan');f1=j(c,'rowspan');if(e1>1||f1>1){H(c,'rowSpan',1);H(c,'colSpan',1);for(i=0;i<e1-1;i++){v.insertAfter(L(c),c);}N(x,y,f1-1,e1);}}});});}function P(c,i,r){var e1,f1,g1,h1,i1,x,y,j1,k1,l1,m1;if(c){e1=_(c);f1=e1.x;g1=e1.y;h1=f1+(i-1);i1=g1+(r-1);}else{o=p=null;e(l,function(n1,y){e(n1,function(c,x){if(I(c)){if(!o){o={x:x,y:y};}p={x:x,y:y};}});});if(o){f1=o.x;g1=o.y;h1=p.x;i1=p.y;}}j1=G(f1,g1);k1=G(h1,i1);if(j1&&k1&&j1.part==k1.part){O();B();j1=G(f1,g1).elm;H(j1,'colSpan',(h1-f1)+1);H(j1,'rowSpan',(i1-g1)+1);for(y=g1;y<=i1;y++){for(x=f1;x<=h1;x++){if(!l[y]||!l[y][x]){continue;}c=l[y][x].elm;if(c!=j1){l1=T.grep(c.childNodes);e(l1,function(n1){j1.appendChild(n1);});if(l1.length){l1=T.grep(j1.childNodes);m1=0;e(l1,function(n1){if(n1.nodeName=='BR'&&m1++<l1.length-1){j1.removeChild(n1);}});}v.remove(c);}}}M();}}function Q(c){var i,r,e1,x,f1,g1,h1,i1,j1;e(l,function(k1,y){e(k1,function(r){if(I(r)){r=r.elm;f1=r.parentNode;g1=C(F(f1,false));i=y;if(c){return false;}}});if(c){return!i;}});if(i===u){return;}for(x=0;x<l[0].length;x++){if(!l[i][x]){continue;}r=l[i][x].elm;if(r!=e1){if(!c){j1=j(r,'rowspan');if(j1>1){H(r,'rowSpan',j1+1);continue;}}else{if(i>0&&l[i-1][x]){i1=l[i-1][x].elm;j1=j(i1,'rowSpan');if(j1>1){H(i1,'rowSpan',j1+1);continue;}}}h1=L(r);H(h1,'colSpan',r.colSpan);g1.appendChild(h1);e1=r;}}if(g1.hasChildNodes()){if(!c){v.insertAfter(g1,f1);}else{f1.parentNode.insertBefore(g1,f1);}}}function R(c){var i,r;e(l,function(y){e(y,function(e1,x){if(I(e1)){i=x;if(c){return false;}}});if(c){return!i;}});e(l,function(x,y){var e1,f1,g1;if(!x[i]){return;}e1=x[i].elm;if(e1!=r){g1=j(e1,'colspan');f1=j(e1,'rowspan');if(g1==1){if(!c){v.insertAfter(L(e1),e1);N(i,y,f1-1,g1);}else{e1.parentNode.insertBefore(L(e1),e1);N(i,y,f1-1,g1);}}else{H(e1,'colSpan',e1.colSpan+1);}r=e1;}});}function S(l){return T.grep(V(l),I);}function V(l){var c=[];e(l,function(r){e(r,function(i){c.push(i);});});return c;}function W(){var c=[];if(z(t)){if(l[0].length==1){return;}if(S(l).length==V(l).length){return;}}e(l,function(r){e(r,function(i,x){if(I(i)&&T.inArray(c,x)===-1){e(l,function(r){var i=r[x].elm,y;y=j(i,'colSpan');if(y>1){H(i,'colSpan',y-1);}else{v.remove(i);}});c.push(x);}});});M();}function X(){var r;function c(i){var x,y;e(i.cells,function(e1){var f1=j(e1,'rowSpan');if(f1>1){H(e1,'rowSpan',f1-1);x=_(e1);N(x.x,x.y,1,1);}});x=_(i.cells[0]);e(l[x.y],function(e1){var f1;e1=e1.elm;if(e1!=y){f1=j(e1,'rowSpan');if(f1<=1){v.remove(e1);}else{H(e1,'rowSpan',f1-1);}y=e1;}});}r=J();if(z(t)&&r.length==t.rows.length){return;}e(r.reverse(),function(i){c(i);});M();}function Y(){var r=J();if(z(t)&&r.length==t.rows.length){return;}v.remove(r);M();return r;}function Z(){var r=J();e(r,function(c,i){r[i]=F(c,true);});return r;}function $(r,c){var x=J(),y=x[c?0:x.length-1],e1=y.cells.length;if(!r){return;}e(l,function(i){var f1;e1=0;e(i,function(g1){if(g1.real){e1+=g1.colspan;}if(g1.elm.parentNode==y){f1=1;}});if(f1){return false;}});if(!c){r.reverse();}e(r,function(f1){var i,g1=f1.cells.length,h1;C(f1);for(i=0;i<g1;i++){h1=f1.cells[i];D(h1);H(h1,'colSpan',1);H(h1,'rowSpan',1);}for(i=g1;i<e1;i++){f1.appendChild(D(L(f1.cells[g1-1])));}for(i=e1;i<g1;i++){v.remove(f1.cells[i]);}if(c){y.parentNode.insertBefore(f1,y);}else{v.insertAfter(f1,y);}});w();}function _(c){var i;e(l,function(r,y){e(r,function(e1,x){if(e1.elm==c){i={x:x,y:y};return false;}});return!i;});return i;}function a1(c){o=_(c);}function b1(){var c,i;c=i=0;e(l,function(r,y){e(r,function(e1,x){var f1,g1;if(I(e1)){e1=l[y][x];if(x>c){c=x;}if(y>i){i=y;}if(e1.real){f1=e1.colspan-1;g1=e1.rowspan-1;if(f1){if(x+f1>c){c=x+f1;}}if(g1){if(y+g1>i){i=y+g1;}}}}});});return{x:c,y:i};}function c1(c){var i,r,e1,f1,g1,h1,i1,j1,x,y;p=_(c);if(o&&p){i=Math.min(o.x,p.x);r=Math.min(o.y,p.y);e1=Math.max(o.x,p.x);f1=Math.max(o.y,p.y);g1=e1;h1=f1;for(y=r;y<=h1;y++){c=l[y][i];if(!c.real){if(i-(c.colspan-1)<i){i-=c.colspan-1;}}}for(x=i;x<=g1;x++){c=l[r][x];if(!c.real){if(r-(c.rowspan-1)<r){r-=c.rowspan-1;}}}for(y=r;y<=f1;y++){for(x=i;x<=e1;x++){c=l[y][x];if(c.real){i1=c.colspan-1;j1=c.rowspan-1;if(i1){if(x+i1>g1){g1=x+i1;}}if(j1){if(y+j1>h1){h1=y+j1;}}}}}w();for(y=r;y<=h1;y++){for(x=i;x<=g1;x++){if(l[y][x]){v.setAttrib(l[y][x].elm,'data-mce-selected','1');}}}}}function d1(c,i){var r,x,y;r=_(c);x=r.y*n+r.x;do{x+=i;y=G(x%n,Math.floor(x/n));if(!y){break;}if(y.elm!=c){q.select(y.elm,true);if(v.isEmpty(y.elm)){q.collapse(true);}return true;}}while(y.elm==c);return false;}t=t||v.getParent(q.getStart(true),'table');B();s=s||v.getParent(q.getStart(true),'th,td');if(s){o=_(s);p=b1();s=G(o.x,o.y);}T.extend(this,{deleteTable:K,split:O,merge:P,insertRow:Q,insertCol:R,deleteCols:W,deleteRows:X,cutRows:Y,copyRows:Z,pasteRows:$,getPos:_,setStartCell:a1,setEndCell:c1,moveRelIdx:d1,refresh:B});};});d("tinymce/tableplugin/Quirks",["tinymce/util/VK","tinymce/util/Delay","tinymce/Env","tinymce/util/Tools","tinymce/tableplugin/Utils"],function(V,D,E,T,U){var j=T.each,k=U.getSpanVal;return function(l){function p(){function o(e){var w=e.keyCode;function x(c,i){var n=c?'previousSibling':'nextSibling';var r=l.dom.getParent(i,'tr');var O=r[n];if(O){K(l,i,O,c);e.preventDefault();return true;}var P=l.dom.getParent(r,'table');var Q=r.parentNode;var R=Q.nodeName.toLowerCase();if(R==='tbody'||R===(c?'tfoot':'thead')){var S=y(c,P,Q,'tbody');if(S!==null){return A(c,S,i);}}return B(c,r,n,P);}function y(c,i,n,r){var O=l.dom.select('>'+r,i);var P=O.indexOf(n);if(c&&P===0||!c&&P===O.length-1){return z(c,i);}else if(P===-1){var Q=n.tagName.toLowerCase()==='thead'?0:O.length-1;return O[Q];}return O[P+(c?-1:1)];}function z(c,i){var n=c?'thead':'tfoot';var r=l.dom.select('>'+n,i);return r.length!==0?r[0]:null;}function A(c,i,n){var r=C(i,c);if(r){K(l,n,r,c);}e.preventDefault();return true;}function B(c,i,n,r){var O=r[n];if(O){F(O);return true;}var P=l.dom.getParent(r,'td,th');if(P){return x(c,P,e);}var Q=C(i,!c);F(Q);e.preventDefault();return false;}function C(c,i){var n=c&&c[i?'lastChild':'firstChild'];return n&&n.nodeName==='BR'?l.dom.getParent(n,'td,th'):n;}function F(n){l.selection.setCursorLocation(n,0);}function G(){return w==V.UP||w==V.DOWN;}function H(l){var n=l.selection.getNode();var c=l.dom.getParent(n,'tr');return c!==null;}function I(i){var n=0;var c=i;while(c.previousSibling){c=c.previousSibling;n=n+k(c,"colspan");}return n;}function J(n,I){var c=0,r=0;j(n.children,function(O,i){c=c+k(O,"colspan");r=i;if(c>I){return false;}});return r;}function K(c,n,r,i){var O=I(l.dom.getParent(n,'td,th'));var P=J(r,O);var Q=r.childNodes[P];var R=C(Q,i);F(R||Q);}function L(N){var n=l.selection.getNode();var c=l.dom.getParent(n,'td,th');var i=l.dom.getParent(N,'td,th');return c&&c!==i&&M(c,i);}function M(n,c){return l.dom.getParent(n,'TABLE')===l.dom.getParent(c,'TABLE');}if(G()&&H(l)){var N=l.selection.getNode();D.setEditorTimeout(l,function(){if(L(N)){x(!e.shiftKey&&w===V.UP,N,e);}},0);}}l.on('KeyDown',function(e){o(e);});}function q(){function i(r,c){var e=c.ownerDocument,n=e.createRange(),o;n.setStartBefore(c);n.setEnd(r.endContainer,r.endOffset);o=e.createElement('body');o.appendChild(n.cloneContents());return o.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,'-').replace(/<[^>]+>/g,'').length===0;}l.on('KeyDown',function(e){var r,c,n=l.dom;if(e.keyCode==37||e.keyCode==38){r=l.selection.getRng();c=n.getParent(r.startContainer,'table');if(c&&l.getBody().firstChild==c){if(i(r,c)){r=n.createRng();r.setStartBefore(c);r.setEndBefore(c);l.selection.setRng(r);e.preventDefault();}}}});}function s(){l.on('KeyDown SetContent VisualAid',function(){var c;for(c=l.getBody().lastChild;c;c=c.previousSibling){if(c.nodeType==3){if(c.nodeValue.length>0){break;}}else if(c.nodeType==1&&(c.tagName=='BR'||!c.getAttribute('data-mce-bogus'))){break;}}if(c&&c.nodeName=='TABLE'){if(l.settings.forced_root_block){l.dom.add(l.getBody(),l.settings.forced_root_block,l.settings.forced_root_block_attrs,E.ie&&E.ie<10?'&nbsp;':'<br data-mce-bogus="1" />');}else{l.dom.add(l.getBody(),'br',{'data-mce-bogus':'1'});}}});l.on('PreProcess',function(o){var c=o.node.lastChild;if(c&&(c.nodeName=="BR"||(c.childNodes.length==1&&(c.firstChild.nodeName=='BR'||c.firstChild.nodeValue=='\u00a0')))&&c.previousSibling&&c.previousSibling.nodeName=="TABLE"){l.dom.remove(c);}});}function t(){function c(e,r,n,o){var w=3,x=e.dom.getParent(r.startContainer,'TABLE');var y,z,A;if(x){y=x.parentNode;}z=r.startContainer.nodeType==w&&r.startOffset===0&&r.endOffset===0&&o&&(n.nodeName=="TR"||n==y);A=(n.nodeName=="TD"||n.nodeName=="TH")&&!o;return z||A;}function i(){var r=l.selection.getRng();var n=l.selection.getNode();var e=l.dom.getParent(r.startContainer,'TD,TH');if(!c(l,r,n,e)){return;}if(!e){e=n;}var o=e.lastChild;while(o.lastChild){o=o.lastChild;}if(o.nodeType==3){r.setEnd(o,o.data.length);l.selection.setRng(r);}}l.on('KeyDown',function(){i();});l.on('MouseDown',function(e){if(e.button!=2){i();}});}function v(){function c(e){l.selection.select(e,true);l.selection.collapse(true);}function i(e){l.$(e).empty();U.paddCell(e);}l.on('keydown',function(e){if((e.keyCode==V.DELETE||e.keyCode==V.BACKSPACE)&&!e.isDefaultPrevented()){var n,o,r,w;n=l.dom.getParent(l.selection.getStart(),'table');if(n){o=l.dom.select('td,th',n);r=T.grep(o,function(w){return!!l.dom.getAttrib(w,'data-mce-selected');});if(r.length===0){w=l.dom.getParent(l.selection.getStart(),'td,th');if(l.selection.isCollapsed()&&w&&l.dom.isEmpty(w)){e.preventDefault();i(w);c(w);}return;}e.preventDefault();l.undoManager.transact(function(){if(o.length==r.length){l.execCommand('mceTableDelete');}else{T.each(r,i);c(r[0]);}});}}});}v();if(E.webkit){p();t();}if(E.gecko){q();s();}if(E.ie>9){q();s();}};});d("tinymce/tableplugin/CellSelection",["tinymce/tableplugin/TableGrid","tinymce/dom/TreeWalker","tinymce/util/Tools"],function(T,c,i){return function(j){var k=j.dom,t,s,l,n,o=true,r;function p(e){j.getBody().style.webkitUserSelect='';if(e||o){j.$('td[data-mce-selected],th[data-mce-selected]').removeAttr('data-mce-selected');o=false;}}function q(e,w){if(!e||!w){return false;}return e===k.getParent(w,'table');}function v(e){var w,x=e.target,y;if(r){return;}if(x===n){return;}n=x;if(l&&s){y=k.getParent(x,'td,th');if(!q(l,y)){y=k.getParent(l,'td,th');}if(q(l,y)){e.preventDefault();if(!t){t=new T(j,l,s);j.getBody().style.webkitUserSelect='none';}t.setEndCell(y);o=true;w=j.selection.getSel();try{if(w.removeAllRanges){w.removeAllRanges();}else{w.empty();}}catch(z){}}}}j.on('SelectionChange',function(e){if(o){e.stopImmediatePropagation();}},true);j.on('MouseDown',function(e){if(e.button!=2&&!r){p();s=k.getParent(e.target,'td,th');l=k.getParent(s,'table');}});j.on('mouseover',v);j.on('remove',function(){k.unbind(j.getDoc(),'mouseover',v);p();});j.on('MouseUp',function(){var e,w=j.selection,x,y,z,A;function B(z,C){var y=new c(z,z);do{if(z.nodeType==3&&i.trim(z.nodeValue).length!==0){if(C){e.setStart(z,0);}else{e.setEnd(z,z.nodeValue.length);}return;}if(z.nodeName=='BR'){if(C){e.setStartBefore(z);}else{e.setEndBefore(z);}return;}}while((z=(C?y.next():y.prev())));}if(s){if(t){j.getBody().style.webkitUserSelect='';}x=k.select('td[data-mce-selected],th[data-mce-selected]');if(x.length>0){e=k.createRng();z=x[0];e.setStartBefore(z);e.setEndAfter(z);B(z,1);y=new c(z,k.getParent(x[0],'table'));do{if(z.nodeName=='TD'||z.nodeName=='TH'){if(!k.getAttrib(z,'data-mce-selected')){break;}A=z;}}while((z=y.next()));B(A);w.setRng(e);}j.nodeChanged();s=t=l=n=null;}});j.on('KeyUp Drop SetContent',function(e){p(e.type=='setcontent');s=t=l=n=null;r=false;});j.on('ObjectResizeStart ObjectResized',function(e){r=e.type!='objectresized';});return{clear:p};};});d("tinymce/tableplugin/Dialogs",["tinymce/util/Tools","tinymce/Env"],function(T,E){var e=T.each;return function(c){var s=this;function j(){var i=c.settings.color_picker_callback;if(i){return function(){var s=this;i.call(c,function(w){s.value(w).fire('change');},s.value());};}}function k(i){return{title:'Advanced',type:'form',defaults:{onchange:function(){q(i,this.parents().reverse()[0],this.name()=="style");}},items:[{label:'Style',name:'style',type:'textbox'},{type:'form',padding:0,formItemDefaults:{layout:'grid',alignH:['start','right']},defaults:{size:7},items:[{label:'Border color',type:'colorbox',name:'borderColor',onaction:j()},{label:'Background color',type:'colorbox',name:'backgroundColor',onaction:j()}]}]};}function r(i){return i?i.replace(/px$/,''):"";}function l(i){if(/^[0-9]+$/.test(i)){i+="px";}return i;}function n(i){e('left center right'.split(' '),function(w){c.formatter.remove('align'+w,{},i);});}function o(i){e('top middle bottom'.split(' '),function(w){c.formatter.remove('valign'+w,{},i);});}function p(i,w,x){function y(z,A){A=A||[];T.each(z,function(B){var C={text:B.text||B.title};if(B.menu){C.menu=y(B.menu);}else{C.value=B.value;if(w){w(C);}}A.push(C);});return A;}return y(i,x||[]);}function q(i,w,x){var y=w.toJSON();var z=i.parseStyle(y.style);if(x){w.find('#borderColor').value(z["border-color"]||'')[0].fire('change');w.find('#backgroundColor').value(z["background-color"]||'')[0].fire('change');}else{z["border-color"]=y.borderColor;z["background-color"]=y.backgroundColor;}w.find('#style').value(i.serializeStyle(i.parseStyle(i.serializeStyle(z))));}function t(i,w,x){var y=i.parseStyle(i.getAttrib(x,'style'));if(y["border-color"]){w.borderColor=y["border-color"];}if(y["background-color"]){w.backgroundColor=y["background-color"];}w.style=i.serializeStyle(y);}function v(i,w,x){var y=i.parseStyle(i.getAttrib(w,'style'));e(x,function(z){y[z.name]=z.value;});i.setAttrib(w,'style',i.serializeStyle(i.parseStyle(i.serializeStyle(y))));}s.tableProps=function(){s.table(true);};s.table=function(w){var x=c.dom,y,z,A,B,C={},D,F;function G(){function I(K,L,M){if(K.tagName==="TD"||K.tagName==="TH"){x.setStyle(K,L,M);}else{if(K.children){for(var i=0;i<K.children.length;i++){I(K.children[i],L,M);}}}}var J;q(x,this);C=T.extend(C,this.toJSON());if(C["class"]===false){delete C["class"];}c.undoManager.transact(function(){if(!y){y=c.plugins.table.insertTable(C.cols||1,C.rows||1);}c.dom.setAttribs(y,{style:C.style,'class':C['class']});if(c.settings.table_style_by_css){F=[];F.push({name:'border',value:C.border});F.push({name:'border-spacing',value:l(C.cellspacing)});v(x,y,F);x.setAttribs(y,{'data-mce-border-color':C.borderColor,'data-mce-cell-padding':C.cellpadding,'data-mce-border':C.border});if(y.children){for(var i=0;i<y.children.length;i++){I(y.children[i],'border',C.border);I(y.children[i],'padding',l(C.cellpadding));}}}else{c.dom.setAttribs(y,{border:C.border,cellpadding:C.cellpadding,cellspacing:C.cellspacing});}if(x.getAttrib(y,'width')&&!c.settings.table_style_by_css){x.setAttrib(y,'width',r(C.width));}else{x.setStyle(y,'width',l(C.width));}x.setStyle(y,'height',l(C.height));J=x.select('caption',y)[0];if(J&&!C.caption){x.remove(J);}if(!J&&C.caption){J=x.create('caption');J.innerHTML=!E.ie?'<br data-mce-bogus="1"/>':'\u00a0';y.insertBefore(J,y.firstChild);}n(y);if(C.align){c.formatter.apply('align'+C.align,{},y);}c.focus();c.addVisual();});}function H(I,J){var K=c.dom.select("td,th",I),L;function M(L,N){for(var i=0;i<N.length;i++){var O=x.getStyle(N[i],J);if(typeof L==="undefined"){L=O;}if(L!=O){return"";}}return L;}L=M(L,K);return L;}if(w===true){y=x.getParent(c.selection.getStart(),'table');if(y){C={width:r(x.getStyle(y,'width')||x.getAttrib(y,'width')),height:r(x.getStyle(y,'height')||x.getAttrib(y,'height')),cellspacing:r(x.getStyle(y,'border-spacing')||x.getAttrib(y,'cellspacing')),cellpadding:x.getAttrib(y,'data-mce-cell-padding')||x.getAttrib(y,'cellpadding')||H(y,'padding'),border:x.getAttrib(y,'data-mce-border')||x.getAttrib(y,'border')||H(y,'border'),borderColor:x.getAttrib(y,'data-mce-border-color'),caption:!!x.select('caption',y)[0],'class':x.getAttrib(y,'class')};e('left center right'.split(' '),function(i){if(c.formatter.matchNode(y,'align'+i)){C.align=i;}});}}else{z={label:'Cols',name:'cols'};A={label:'Rows',name:'rows'};}if(c.settings.table_class_list){if(C["class"]){C["class"]=C["class"].replace(/\s*mce\-item\-table\s*/g,'');}B={name:'class',type:'listbox',label:'Class',values:p(c.settings.table_class_list,function(i){if(i.value){i.textStyle=function(){return c.formatter.getCssText({block:'table',classes:[i.value]});};}})};}D={type:'form',layout:'flex',direction:'column',labelGapCalc:'children',padding:0,items:[{type:'form',labelGapCalc:false,padding:0,layout:'grid',columns:2,defaults:{type:'textbox',maxWidth:50},items:(c.settings.table_appearance_options!==false)?[z,A,{label:'Width',name:'width'},{label:'Height',name:'height'},{label:'Cell spacing',name:'cellspacing'},{label:'Cell padding',name:'cellpadding'},{label:'Border',name:'border'},{label:'Caption',name:'caption',type:'checkbox'}]:[z,A,{label:'Width',name:'width'},{label:'Height',name:'height'}]},{label:'Alignment',name:'align',type:'listbox',text:'None',values:[{text:'None',value:''},{text:'Left',value:'left'},{text:'Center',value:'center'},{text:'Right',value:'right'}]},B]};if(c.settings.table_advtab!==false){t(x,C,y);c.windowManager.open({title:"Table properties",data:C,bodyType:'tabpanel',body:[{title:'General',type:'form',items:D},k(x)],onsubmit:G});}else{c.windowManager.open({title:"Table properties",data:C,body:D,onsubmit:G});}};s.merge=function(i,w){c.windowManager.open({title:"Merge cells",body:[{label:'Cols',name:'cols',type:'textbox',value:'1',size:10},{label:'Rows',name:'rows',type:'textbox',value:'1',size:10}],onsubmit:function(){var x=this.toJSON();c.undoManager.transact(function(){i.merge(w,x.cols,x.rows);});}});};s.cell=function(){var i=c.dom,w,x,y,z=[];function A(){q(i,this);x=T.extend(x,this.toJSON());c.undoManager.transact(function(){e(z,function(w){c.dom.setAttribs(w,{scope:x.scope,style:x.style,'class':x['class']});c.dom.setStyles(w,{width:l(x.width),height:l(x.height)});if(x.type&&w.nodeName.toLowerCase()!=x.type){w=i.rename(w,x.type);}n(w);if(x.align){c.formatter.apply('align'+x.align,{},w);}o(w);if(x.valign){c.formatter.apply('valign'+x.valign,{},w);}});c.focus();});}z=c.dom.select('td[data-mce-selected],th[data-mce-selected]');w=c.dom.getParent(c.selection.getStart(),'td,th');if(!z.length&&w){z.push(w);}w=w||z[0];if(!w){return;}x={width:r(i.getStyle(w,'width')||i.getAttrib(w,'width')),height:r(i.getStyle(w,'height')||i.getAttrib(w,'height')),scope:i.getAttrib(w,'scope'),'class':i.getAttrib(w,'class')};x.type=w.nodeName.toLowerCase();e('left center right'.split(' '),function(C){if(c.formatter.matchNode(w,'align'+C)){x.align=C;}});e('top middle bottom'.split(' '),function(C){if(c.formatter.matchNode(w,'valign'+C)){x.valign=C;}});if(c.settings.table_cell_class_list){y={name:'class',type:'listbox',label:'Class',values:p(c.settings.table_cell_class_list,function(C){if(C.value){C.textStyle=function(){return c.formatter.getCssText({block:'td',classes:[C.value]});};}})};}var B={type:'form',layout:'flex',direction:'column',labelGapCalc:'children',padding:0,items:[{type:'form',layout:'grid',columns:2,labelGapCalc:false,padding:0,defaults:{type:'textbox',maxWidth:50},items:[{label:'Width',name:'width'},{label:'Height',name:'height'},{label:'Cell type',name:'type',type:'listbox',text:'None',minWidth:90,maxWidth:null,values:[{text:'Cell',value:'td'},{text:'Header cell',value:'th'}]},{label:'Scope',name:'scope',type:'listbox',text:'None',minWidth:90,maxWidth:null,values:[{text:'None',value:''},{text:'Row',value:'row'},{text:'Column',value:'col'},{text:'Row group',value:'rowgroup'},{text:'Column group',value:'colgroup'}]},{label:'H Align',name:'align',type:'listbox',text:'None',minWidth:90,maxWidth:null,values:[{text:'None',value:''},{text:'Left',value:'left'},{text:'Center',value:'center'},{text:'Right',value:'right'}]},{label:'V Align',name:'valign',type:'listbox',text:'None',minWidth:90,maxWidth:null,values:[{text:'None',value:''},{text:'Top',value:'top'},{text:'Middle',value:'middle'},{text:'Bottom',value:'bottom'}]}]},y]};if(c.settings.table_cell_advtab!==false){t(i,x,w);c.windowManager.open({title:"Cell properties",bodyType:'tabpanel',data:x,body:[{title:'General',type:'form',items:B},k(i)],onsubmit:A});}else{c.windowManager.open({title:"Cell properties",data:x,body:B,onsubmit:A});}};s.row=function(){var i=c.dom,w,x,y,z,A,B=[],C;function D(){var w,F,G;q(i,this);A=T.extend(A,this.toJSON());c.undoManager.transact(function(){var H=A.type;e(B,function(y){c.dom.setAttribs(y,{scope:A.scope,style:A.style,'class':A['class']});c.dom.setStyles(y,{height:l(A.height)});if(H!=y.parentNode.nodeName.toLowerCase()){w=i.getParent(y,'table');F=y.parentNode;G=i.select(H,w)[0];if(!G){G=i.create(H);if(w.firstChild){w.insertBefore(G,w.firstChild);}else{w.appendChild(G);}}G.appendChild(y);if(!F.hasChildNodes()){i.remove(F);}}n(y);if(A.align){c.formatter.apply('align'+A.align,{},y);}});c.focus();});}w=c.dom.getParent(c.selection.getStart(),'table');x=c.dom.getParent(c.selection.getStart(),'td,th');e(w.rows,function(F){e(F.cells,function(G){if(i.getAttrib(G,'data-mce-selected')||G==x){B.push(F);return false;}});});y=B[0];if(!y){return;}A={height:r(i.getStyle(y,'height')||i.getAttrib(y,'height')),scope:i.getAttrib(y,'scope'),'class':i.getAttrib(y,'class')};A.type=y.parentNode.nodeName.toLowerCase();e('left center right'.split(' '),function(F){if(c.formatter.matchNode(y,'align'+F)){A.align=F;}});if(c.settings.table_row_class_list){z={name:'class',type:'listbox',label:'Class',values:p(c.settings.table_row_class_list,function(F){if(F.value){F.textStyle=function(){return c.formatter.getCssText({block:'tr',classes:[F.value]});};}})};}C={type:'form',columns:2,padding:0,defaults:{type:'textbox'},items:[{type:'listbox',name:'type',label:'Row type',text:'None',maxWidth:null,values:[{text:'Header',value:'thead'},{text:'Body',value:'tbody'},{text:'Footer',value:'tfoot'}]},{type:'listbox',name:'align',label:'Alignment',text:'None',maxWidth:null,values:[{text:'None',value:''},{text:'Left',value:'left'},{text:'Center',value:'center'},{text:'Right',value:'right'}]},{label:'Height',name:'height'},z]};if(c.settings.table_row_advtab!==false){t(i,A,y);c.windowManager.open({title:"Row properties",data:A,bodyType:'tabpanel',body:[{title:'General',type:'form',items:C},k(i)],onsubmit:D});}else{c.windowManager.open({title:"Row properties",data:A,body:C,onsubmit:D});}};};});d("tinymce/tableplugin/ResizeBars",["tinymce/util/Tools","tinymce/util/VK"],function(T,V){var c;return function(k){var R='mce-resize-bar',l='mce-resize-bar-row',n='row-resize',o='data-row',p='data-initial-top',q='mce-resize-bar-col',s='col-resize',t='data-col',v='data-initial-left',w=4,x=10,y=10,z='mce-resize-bar-dragging';var A=new RegExp(/(\d+(\.\d+)?%)/),B=new RegExp(/px|em/);var C,D,E,F,G,H;function I(i,r){return{index:i,y:k.dom.getPos(r).y};}function J(i,r){return{index:i,y:k.dom.getPos(r).y+r.offsetHeight};}function K(i,e){return{index:i,x:k.dom.getPos(e).x};}function L(i,e){return{index:i,x:k.dom.getPos(e).x+e.offsetWidth};}function M(){var e=k.getBody().dir;return e==='rtl';}function N(){return k.inline;}function O(){return N?k.getBody().ownerDocument.body:k.getBody();}function P(i,e){return M()?L(i,e):K(i,e);}function Q(i,e){return M()?K(i,e):L(i,e);}function S(e,i){return U(e,'width')/U(i,'width')*100;}function U(e,i){var j=k.dom.getStyle(e,i,true);var r=parseInt(j,10);return r;}function W(e){var i=U(e,'width');var j=U(e.parentElement,'width');return i/j*100;}function X(e,i){var j=U(e,'width');return i/j*100;}function Y(e,i){var j=U(e.parentElement,'width');return i/j*100;}function Z(e,j,r){var M1=[];for(var i=1;i<r.length;i++){var N1=r[i].element;M1.push(e(i-1,N1));}var O1=r[r.length-1];M1.push(j(r.length-1,O1.element));return M1;}function $(){var e=k.dom.select('.'+R,O());T.each(e,function(i){k.dom.remove(i);});}function _(e){$();j1(e);}function a1(e,i,j,r,M1,N1,O1,P1){var Q1={'data-mce-bogus':'all','class':R+' '+e,'unselectable':'on','data-mce-resize':false,style:'cursor: '+i+'; '+'margin: 0; '+'padding: 0; '+'position: absolute; '+'left: '+j+'px; '+'top: '+r+'px; '+'height: '+M1+'px; '+'width: '+N1+'px; '};Q1[O1]=P1;return Q1;}function b1(r,e,i){T.each(r,function(j){var M1=i.x,N1=j.y-w/2,O1=w,P1=e;k.dom.add(O(),'div',a1(l,n,M1,N1,O1,P1,o,j.index));});}function c1(e,i,j){T.each(e,function(r){var M1=r.x-w/2,N1=j.y,O1=i,P1=w;k.dom.add(O(),'div',a1(q,s,M1,N1,O1,P1,t,r.index));});}function d1(e){return T.map(e.rows,function(r){var i=T.map(r.cells,function(j){var M1=j.hasAttribute('rowspan')?parseInt(j.getAttribute('rowspan'),10):1;var N1=j.hasAttribute('colspan')?parseInt(j.getAttribute('colspan'),10):1;return{element:j,rowspan:M1,colspan:N1};});return{element:r,cells:i};});}function e1(e){function r(i,j){return i+','+j;}function M1(i,j){return P1[r(i,j)];}function N1(){var i=[];T.each(Q1,function(j){i=i.concat(j.cells);});return i;}function O1(){return Q1;}var P1={};var Q1=[];var R1=0;var S1=0;T.each(e,function(T1,U1){var V1=[];T.each(T1.cells,function(W1){var X1=0;while(P1[r(U1,X1)]!==u){X1++;}var Y1={element:W1.element,colspan:W1.colspan,rowspan:W1.rowspan,rowIndex:U1,colIndex:X1};for(var i=0;i<W1.colspan;i++){for(var j=0;j<W1.rowspan;j++){var cr=U1+j;var cc=X1+i;P1[r(cr,cc)]=Y1;R1=Math.max(R1,cr+1);S1=Math.max(S1,cc+1);}}V1.push(Y1);});Q1.push({element:T1.element,cells:V1});});return{grid:{maxRows:R1,maxCols:S1},getAt:M1,getAllCells:N1,getAllRows:O1};}function f1(e,j){var r=[];for(var i=e;i<j;i++){r.push(i);}return r;}function g1(e,j,r){var M1=e();var N1;for(var i=0;i<M1.length;i++){if(j(M1[i])){N1=M1[i];}}return N1?N1:r();}function h1(e){var j=f1(0,e.grid.maxCols);var r=f1(0,e.grid.maxRows);return T.map(j,function(M1){function N1(){var Q1=[];for(var i=0;i<r.length;i++){var R1=e.getAt(i,M1);if(R1&&R1.colIndex===M1){Q1.push(R1);}}return Q1;}function O1(i){return i.colspan===1;}function P1(){var Q1;for(var i=0;i<r.length;i++){Q1=e.getAt(i,M1);if(Q1){return Q1;}}return null;}return g1(N1,O1,P1);});}function i1(e){var j=f1(0,e.grid.maxCols);var r=f1(0,e.grid.maxRows);return T.map(r,function(M1){function N1(){var Q1=[];for(var i=0;i<j.length;i++){var R1=e.getAt(M1,i);if(R1&&R1.rowIndex===M1){Q1.push(R1);}}return Q1;}function O1(i){return i.rowspan===1;}function P1(){return e.getAt(M1,0);}return g1(N1,O1,P1);});}function j1(e){var i=d1(e);var j=e1(i);var r=i1(j);var M1=h1(j);var N1=k.dom.getPos(e);var O1=r.length>0?Z(I,J,r):[];var P1=M1.length>0?Z(P,Q,M1):[];b1(O1,e.offsetWidth,N1);c1(P1,e.offsetHeight,N1);}function k1(e,r,M1,N1){if(r<0||r>=e.length-1){return"";}var O1=e[r];if(O1){O1={value:O1,delta:0};}else{var P1=e.slice(0,r).reverse();for(var i=0;i<P1.length;i++){if(P1[i]){O1={value:P1[i],delta:i+1};}}}var Q1=e[r+1];if(Q1){Q1={value:Q1,delta:1};}else{var R1=e.slice(r+1);for(var j=0;j<R1.length;j++){if(R1[j]){Q1={value:R1[j],delta:j+1};}}}var S1=Q1.delta-O1.delta;var T1=Math.abs(Q1.value-O1.value)/S1;return M1?T1/U(N1,'width')*100:T1;}function l1(e,i){var j=k.dom.getStyle(e,i);if(!j){j=k.dom.getAttrib(e,i);}if(!j){j=k.dom.getStyle(e,i,true);}return j;}function m1(e,i,j){var r=l1(e,'width');var M1=parseInt(r,10);var N1=i?S(e,j):U(e,'width');if(i&&!v1(r)||!i&&!w1(r)){M1=0;}return!isNaN(M1)&&M1>0?M1:N1;}function n1(e,j,r){var M1=h1(e);var N1=T.map(M1,function(R1){return P(R1.colIndex,R1.element).x;});var O1=[];for(var i=0;i<M1.length;i++){var P1=M1[i].element.hasAttribute('colspan')?parseInt(M1[i].element.getAttribute('colspan'),10):1;var Q1=P1>1?k1(N1,i):m1(M1[i].element,j,r);Q1=Q1?Q1:x;O1.push(Q1);}return O1;}function o1(e){var i=l1(e,'height');var j=parseInt(i,10);if(v1(i)){j=0;}return!isNaN(j)&&j>0?j:U(e,'height');}function p1(e){var r=i1(e);var j=T.map(r,function(P1){return I(P1.rowIndex,P1.element).y;});var M1=[];for(var i=0;i<r.length;i++){var N1=r[i].element.hasAttribute('rowspan')?parseInt(r[i].element.getAttribute('rowspan'),10):1;var O1=N1>1?k1(j,i):o1(r[i].element);O1=O1?O1:y;M1.push(O1);}return M1;}function q1(e,i,j,r,M1){var N1=e.slice(0);function O1(T1){return T.map(T1,function(){return 0;});}function P1(){var S1;if(M1){S1=[100-N1[0]];}else{var T1=Math.max(r,N1[0]+j);S1=[T1-N1[0]];}return S1;}function Q1(T1,U1){var V1=O1(N1.slice(0,T1));var W1=O1(N1.slice(U1+1));var S1;if(j>=0){var X1=Math.max(r,N1[U1]-j);S1=V1.concat([j,X1-N1[U1]]).concat(W1);}else{var Y1=Math.max(r,N1[T1]+j);var Z1=N1[T1]-Y1;S1=V1.concat([Y1-N1[T1],Z1]).concat(W1);}return S1;}function R1(T1,U1){var V1=O1(N1.slice(0,U1));var S1;if(j>=0){S1=V1.concat([j]);}else{var W1=Math.max(r,N1[U1]+j);S1=V1.concat([W1-N1[U1]]);}return S1;}var S1;if(e.length===0){S1=[];}else if(e.length===1){S1=P1();}else if(i===0){S1=Q1(0,1);}else if(i>0&&i<e.length-1){S1=Q1(i,i+1);}else if(i===e.length-1){S1=R1(i-1,i);}else{S1=[];}return S1;}function r1(e,j,M1){var r=0;for(var i=e;i<j;i++){r+=M1[i];}return r;}function s1(e,i){var j=e.getAllCells();return T.map(j,function(r){var M1=r1(r.colIndex,r.colIndex+r.colspan,i);return{element:r.element,width:M1,colspan:r.colspan};});}function t1(e,i){var j=e.getAllCells();return T.map(j,function(r){var M1=r1(r.rowIndex,r.rowIndex+r.rowspan,i);return{element:r.element,height:M1,rowspan:r.rowspan};});}function u1(e,j){var r=e.getAllRows();return T.map(r,function(M1,i){return{element:M1.element,height:j[i]};});}function v1(e){return A.test(e);}function w1(e){return B.test(e);}function x1(e,j,r){var M1=d1(e);var N1=e1(M1);function O1(X1,Y1){T.each(X1,function($1){k.dom.setStyle($1.element,'width',$1.width+Y1);k.dom.setAttrib($1.element,'width',null);});}function P1(){return r<N1.grid.maxCols-1?W(e):W(e)+Y(e,j);}function Q1(){return r<N1.grid.maxCols-1?U(e,'width'):U(e,'width')+j;}function R1(Z1,Y1,$1){if(r==N1.grid.maxCols-1||!$1){k.dom.setStyle(e,'width',Z1+Y1);k.dom.setAttrib(e,'width',null);}}var S1=v1(e.width)||v1(e.style.width);var T1=n1(N1,S1,e);var U1=S1?X(e,j):j;var V1=q1(T1,r,U1,x,S1,e);var W1=[];for(var i=0;i<V1.length;i++){W1.push(V1[i]+T1[i]);}var X1=s1(N1,W1);var Y1=S1?'%':'px';var Z1=S1?P1():Q1();k.undoManager.transact(function(){O1(X1,Y1);R1(Z1,Y1,S1);});}function y1(e,j,r){var M1=d1(e);var N1=e1(M1);var O1=p1(N1);var P1=[],Q1=0;for(var i=0;i<O1.length;i++){P1.push(i===r?j+O1[i]:O1[i]);Q1+=Q1[i];}var R1=t1(N1,P1);var S1=u1(N1,P1);k.undoManager.transact(function(){T.each(S1,function(T1){k.dom.setStyle(T1.element,'height',T1.height+'px');k.dom.setAttrib(T1.element,'height',null);});T.each(R1,function(T1){k.dom.setStyle(T1.element,'height',T1.height+'px');k.dom.setAttrib(T1.element,'height',null);});k.dom.setStyle(e,'height',Q1+'px');k.dom.setAttrib(e,'height',null);});}function z1(){C=setTimeout(function(){D1();},200);}function A1(){clearTimeout(C);}function B1(){var e=document.createElement('div');e.setAttribute('style','margin: 0; '+'padding: 0; '+'position: fixed; '+'left: 0px; '+'top: 0px; '+'height: 100%; '+'width: 100%;');e.setAttribute('data-mce-bogus','all');return e;}function C1(i,j){k.dom.bind(i,'mouseup',function(){D1();});k.dom.bind(i,'mousemove',function(e){A1();if(D){j(e);}});k.dom.bind(i,'mouseout',function(){z1();});}function D1(){k.dom.remove(E);if(D){k.dom.removeClass(F,z);D=false;var i,e;if(F1(F)){var j=parseInt(k.dom.getAttrib(F,v),10);var r=k.dom.getPos(F).x;i=parseInt(k.dom.getAttrib(F,t),10);e=M()?j-r:r-j;x1(c,e,i);}else if(G1(F)){var M1=parseInt(k.dom.getAttrib(F,p),10);var N1=k.dom.getPos(F).y;i=parseInt(k.dom.getAttrib(F,o),10);e=N1-M1;y1(c,e,i);}_(c);k.nodeChanged();}}function E1(e,i){E=E?E:B1();D=true;k.dom.addClass(e,z);F=e;C1(E,i);k.dom.add(O(),E);}function F1(e){return k.dom.hasClass(e,q);}function G1(e){return k.dom.hasClass(e,l);}function H1(e){G=G!==u?G:e.clientX;var i=e.clientX-G;G=e.clientX;var j=k.dom.getPos(F).x;k.dom.setStyle(F,'left',j+i+'px');}function I1(e){H=H!==u?H:e.clientY;var i=e.clientY-H;H=e.clientY;var j=k.dom.getPos(F).y;k.dom.setStyle(F,'top',j+i+'px');}function J1(e){G=u;E1(e,H1);}function K1(e){H=u;E1(e,I1);}function L1(e){var i=e.target,j=k.getBody();if(!k.$.contains(j,c)&&c!==j){return;}if(F1(i)){e.preventDefault();var r=k.dom.getPos(i).x;k.dom.setAttrib(i,v,r);J1(i);}else if(G1(i)){e.preventDefault();var M1=k.dom.getPos(i).y;k.dom.setAttrib(i,p,M1);K1(i);}}k.on('init',function(){k.dom.bind(O(),'mousedown',L1);});k.on('ObjectResized',function(e){var i=e.target;if(i.nodeName==='TABLE'){var j=[];T.each(i.rows,function(r){T.each(r.cells,function(M1){var N1=k.dom.getStyle(M1,'width',true);j.push({cell:M1,width:N1});});});T.each(j,function(r){k.dom.setStyle(r.cell,'width',r.width);k.dom.setAttrib(r.cell,'width',null);});}});k.on('mouseover',function(e){if(!D){var i=k.dom.getParent(e.target,'table');if(e.target.nodeName==='TABLE'||i){c=i;_(i);}}});k.on('keydown',function(e){switch(e.keyCode){case V.LEFT:case V.RIGHT:case V.UP:case V.DOWN:$();break;}});k.on('remove',function(){$();k.dom.unbind(O(),'mousedown',L1);});return{adjustWidth:x1,adjustHeight:y1,clearBars:$,drawBars:j1,determineDeltas:q1,getTableGrid:e1,getTableDetails:d1,getWidths:n1,getPixelHeights:p1,isPercentageBasedSize:v1,isPixelBasedSize:w1,recalculateWidths:s1,recalculateCellHeights:t1,recalculateRowHeights:u1};};});d("tinymce/tableplugin/Plugin",["tinymce/tableplugin/TableGrid","tinymce/tableplugin/Quirks","tinymce/tableplugin/CellSelection","tinymce/tableplugin/Dialogs","tinymce/tableplugin/ResizeBars","tinymce/util/Tools","tinymce/dom/TreeWalker","tinymce/Env","tinymce/PluginManager"],function(T,Q,C,D,R,c,j,E,P){var k=c.each;function l(n){var o,s=this,p=new D(n),r;if(n.settings.object_resizing&&n.settings.table_resize_bars!==false&&(n.settings.object_resizing===true||n.settings.object_resizing==='table')){r=R(n);}function q(e){return function(){n.execCommand(e);};}function t(e,i){var y,x,K,L;K='<table id="__mce"><tbody>';for(y=0;y<i;y++){K+='<tr>';for(x=0;x<e;x++){K+='<td>'+(E.ie&&E.ie<10?'&nbsp;':'<br>')+'</td>';}K+='</tr>';}K+='</tbody></table>';n.undoManager.transact(function(){n.insertContent(K);L=n.dom.get('__mce');n.dom.setAttrib(L,'id',null);n.$('tr',L).each(function(M,N){n.fire('newrow',{node:N});n.$('th,td',N).each(function(M,O){n.fire('newcell',{node:O});});});n.dom.setAttribs(L,n.settings.table_default_attributes||{});n.dom.setStyles(L,n.settings.table_default_styles||{});});return L;}function v(e,i,x){function y(){var K,L,M={},N=0,O;L=n.dom.select('td[data-mce-selected],th[data-mce-selected]');K=L[0];if(!K){K=n.selection.getStart();}if(x&&L.length>0){k(L,function(S){return M[S.parentNode.parentNode.nodeName]=1;});k(M,function(S){N+=S;});O=N!==1;}else{O=!n.dom.getParent(K,i);}e.disabled(O);n.selection.selectorChanged(i,function(O){e.disabled(!O);});}if(n.initialized){y();}else{n.on('init',y);}}function w(){v(this,'table');}function z(){v(this,'td,th');}function A(){v(this,'td,th',true);}function B(){var e='';e='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var y=0;y<10;y++){e+='<tr>';for(var x=0;x<10;x++){e+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(y*10+x)+'" href="#" '+'data-mce-x="'+x+'" data-mce-y="'+y+'"></a></td>';}e+='</tr>';}e+='</table>';e+='<div class="mce-text-center" role="presentation">1 x 1</div>';return e;}function F(e,i,K){var L=K.getEl().getElementsByTagName('table')[0];var x,y,M,N,O;var S=K.isRtl()||K.parent().rel=='tl-tr';L.nextSibling.innerHTML=(e+1)+' x '+(i+1);if(S){e=9-e;}for(y=0;y<10;y++){for(x=0;x<10;x++){N=L.rows[y].childNodes[x].firstChild;O=(S?x>=e:x<=e)&&y<=i;n.dom.toggleClass(N,'mce-active',O);if(O){M=N;}}}return M.parentNode;}if(n.settings.table_grid===false){n.addMenuItem('inserttable',{text:'Insert table',icon:'table',context:'table',onclick:p.table});}else{n.addMenuItem('inserttable',{text:'Insert table',icon:'table',context:'table',ariaHideMenu:true,onclick:function(e){if(e.aria){this.parent().hideAll();e.stopImmediatePropagation();p.table();}},onshow:function(){F(0,0,this.menu.items()[0]);},onhide:function(){var e=this.menu.items()[0].getEl().getElementsByTagName('a');n.dom.removeClass(e,'mce-active');n.dom.addClass(e[0],'mce-active');},menu:[{type:'container',html:B(),onPostRender:function(){this.lastX=this.lastY=0;},onmousemove:function(e){var i=e.target,x,y;if(i.tagName.toUpperCase()=='A'){x=parseInt(i.getAttribute('data-mce-x'),10);y=parseInt(i.getAttribute('data-mce-y'),10);if(this.isRtl()||this.parent().rel=='tl-tr'){x=9-x;}if(x!==this.lastX||y!==this.lastY){F(x,y,e.control);this.lastX=x;this.lastY=y;}}},onclick:function(e){var s=this;if(e.target.tagName.toUpperCase()=='A'){e.preventDefault();e.stopPropagation();s.parent().cancel();n.undoManager.transact(function(){t(s.lastX+1,s.lastY+1);});n.addVisual();}}}]});}n.addMenuItem('tableprops',{text:'Table properties',context:'table',onPostRender:w,onclick:p.tableProps});n.addMenuItem('deletetable',{text:'Delete table',context:'table',onPostRender:w,cmd:'mceTableDelete'});n.addMenuItem('cell',{separator:'before',text:'Cell',context:'table',menu:[{text:'Cell properties',onclick:q('mceTableCellProps'),onPostRender:z},{text:'Merge cells',onclick:q('mceTableMergeCells'),onPostRender:A},{text:'Split cell',onclick:q('mceTableSplitCells'),onPostRender:z}]});n.addMenuItem('row',{text:'Row',context:'table',menu:[{text:'Insert row before',onclick:q('mceTableInsertRowBefore'),onPostRender:z},{text:'Insert row after',onclick:q('mceTableInsertRowAfter'),onPostRender:z},{text:'Delete row',onclick:q('mceTableDeleteRow'),onPostRender:z},{text:'Row properties',onclick:q('mceTableRowProps'),onPostRender:z},{text:'-'},{text:'Cut row',onclick:q('mceTableCutRow'),onPostRender:z},{text:'Copy row',onclick:q('mceTableCopyRow'),onPostRender:z},{text:'Paste row before',onclick:q('mceTablePasteRowBefore'),onPostRender:z},{text:'Paste row after',onclick:q('mceTablePasteRowAfter'),onPostRender:z}]});n.addMenuItem('column',{text:'Column',context:'table',menu:[{text:'Insert column before',onclick:q('mceTableInsertColBefore'),onPostRender:z},{text:'Insert column after',onclick:q('mceTableInsertColAfter'),onPostRender:z},{text:'Delete column',onclick:q('mceTableDeleteCol'),onPostRender:z}]});var G=[];k("inserttable tableprops deletetable | cell row column".split(' '),function(e){if(e=='|'){G.push({text:'-'});}else{G.push(n.menuItems[e]);}});n.addButton("table",{type:"menubutton",title:"Table",menu:G});if(!E.isIE){n.on('click',function(e){e=e.target;if(e.nodeName==='TABLE'){n.selection.select(e);n.nodeChanged();}});}s.quirks=new Q(n);n.on('Init',function(){s.cellSelection=new C(n);s.resizeBars=r;});n.on('PreInit',function(){n.serializer.addAttributeFilter('data-mce-cell-padding,data-mce-border,data-mce-border-color',function(e,x){var i=e.length;while(i--){e[i].attr(x,null);}});});k({mceTableSplitCells:function(e){e.split();},mceTableMergeCells:function(e){var i;i=n.dom.getParent(n.selection.getStart(),'th,td');if(!n.dom.select('td[data-mce-selected],th[data-mce-selected]').length){p.merge(e,i);}else{e.merge();}},mceTableInsertRowBefore:function(e){e.insertRow(true);},mceTableInsertRowAfter:function(e){e.insertRow();},mceTableInsertColBefore:function(e){e.insertCol(true);},mceTableInsertColAfter:function(e){e.insertCol();},mceTableDeleteCol:function(e){e.deleteCols();},mceTableDeleteRow:function(e){e.deleteRows();},mceTableCutRow:function(e){o=e.cutRows();},mceTableCopyRow:function(e){o=e.copyRows();},mceTablePasteRowBefore:function(e){e.pasteRows(o,true);},mceTablePasteRowAfter:function(e){e.pasteRows(o);},mceTableDelete:function(e){if(r){r.clearBars();}e.deleteTable();}},function(e,i){n.addCommand(i,function(){var x=new T(n);if(x){e(x);n.execCommand('mceRepaint');s.cellSelection.clear();}});});k({mceInsertTable:p.table,mceTableProps:function(){p.table(true);},mceTableRowProps:p.row,mceTableCellProps:p.cell},function(e,i){n.addCommand(i,function(x,y){e(y);});});function H(){n.addButton('tableprops',{title:'Table properties',onclick:p.tableProps,icon:'table'});n.addButton('tabledelete',{title:'Delete table',onclick:q('mceTableDelete')});n.addButton('tablecellprops',{title:'Cell properties',onclick:q('mceTableCellProps')});n.addButton('tablemergecells',{title:'Merge cells',onclick:q('mceTableMergeCells')});n.addButton('tablesplitcells',{title:'Split cell',onclick:q('mceTableSplitCells')});n.addButton('tableinsertrowbefore',{title:'Insert row before',onclick:q('mceTableInsertRowBefore')});n.addButton('tableinsertrowafter',{title:'Insert row after',onclick:q('mceTableInsertRowAfter')});n.addButton('tabledeleterow',{title:'Delete row',onclick:q('mceTableDeleteRow')});n.addButton('tablerowprops',{title:'Row properties',onclick:q('mceTableRowProps')});n.addButton('tablecutrow',{title:'Cut row',onclick:q('mceTableCutRow')});n.addButton('tablecopyrow',{title:'Copy row',onclick:q('mceTableCopyRow')});n.addButton('tablepasterowbefore',{title:'Paste row before',onclick:q('mceTablePasteRowBefore')});n.addButton('tablepasterowafter',{title:'Paste row after',onclick:q('mceTablePasteRowAfter')});n.addButton('tableinsertcolbefore',{title:'Insert column before',onclick:q('mceTableInsertColBefore')});n.addButton('tableinsertcolafter',{title:'Insert column after',onclick:q('mceTableInsertColAfter')});n.addButton('tabledeletecol',{title:'Delete column',onclick:q('mceTableDeleteCol')});}function I(e){var i=n.dom.is(e,'table')&&n.getBody().contains(e);return i;}function J(){var e=n.settings.table_toolbar;if(e===''||e===false){return;}if(!e){e='tableprops tabledelete | '+'tableinsertrowbefore tableinsertrowafter tabledeleterow | '+'tableinsertcolbefore tableinsertcolafter tabledeletecol';}n.addContextToolbar(I,e);}H();J();if(n.settings.table_tab_navigation!==false){n.on('keydown',function(e){var i,x,y;if(e.keyCode==9){i=n.dom.getParent(n.selection.getStart(),'th,td');if(i){e.preventDefault();x=new T(n);y=e.shiftKey?-1:1;n.undoManager.transact(function(){if(!x.moveRelIdx(i,y)&&y>0){x.insertRow();x.refresh();x.moveRelIdx(i,y);}});}}});}s.insertTable=t;}P.add('table',l);});})(this);
