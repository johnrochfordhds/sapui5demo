define("tinymce/spellcheckerplugin/DomTextMatcher",[],function(){function c(n){return n&&n.nodeType==1&&n.contentEditable==="false";}
// released under UNLICENSE that is compatible with LGPL
return function(n,e){var m,d=[],t,f=e.dom;var g,h,s;g=e.schema.getBlockElements();h=e.schema.getWhiteSpaceElements();s=e.schema.getShortEndedElements();function j(m,a){if(!m[0]){throw'findAndReplaceDOMText cannot handle zero-length matches';}return{start:m.index,end:m.index+m[0].length,text:m[0],data:a};}function k(n){var a;if(n.nodeType===3){return n.data;}if(h[n.nodeName]&&!g[n.nodeName]){return'';}if(c(n)){return'\n';}a='';if(g[n.nodeName]||s[n.nodeName]){a+='\n';}if((n=n.firstChild)){do{a+=k(n);}while((n=n.nextSibling));}return a;}function o(n,d,i){var l,G,H,I,J=[],K=0,L=n,M,N=0;d=d.slice(0);d.sort(function(a,b){return a.start-b.start;});M=d.shift();out:while(true){if(g[L.nodeName]||s[L.nodeName]||c(L)){K++;}if(L.nodeType===3){if(!G&&L.length+K>=M.end){G=L;I=M.end-K;}else if(l){J.push(L);}if(!l&&L.length+K>M.start){l=L;H=M.start-K;}K+=L.length;}if(l&&G){L=i({startNode:l,startNodeIndex:H,endNode:G,endNodeIndex:I,innerNodes:J,match:M.text,matchIndex:N});K-=(G.length-I);l=null;G=null;J=[];M=d.shift();N++;if(!M){break;}}else if((!h[L.nodeName]||g[L.nodeName])&&L.firstChild){if(!c(L)){L=L.firstChild;continue;}}else if(L.nextSibling){L=L.nextSibling;continue;}while(true){if(L.nextSibling){L=L.nextSibling;break;}else if(L.parentNode!==n){L=L.parentNode;}else{break out;}}}}function p(a){function b(i,l){var G=d[l];if(!G.stencil){G.stencil=a(G);}var H=G.stencil.cloneNode(false);H.setAttribute('data-mce-index',l);if(i){H.appendChild(f.doc.createTextNode(i));}return H;}return function(G){var H,I,J,K=G.startNode,L=G.endNode,M=G.matchIndex,N=f.doc;if(K===L){var n=K;J=n.parentNode;if(G.startNodeIndex>0){H=N.createTextNode(n.data.substring(0,G.startNodeIndex));J.insertBefore(H,n);}var O=b(G.match,M);J.insertBefore(O,n);if(G.endNodeIndex<n.length){I=N.createTextNode(n.data.substring(G.endNodeIndex));J.insertBefore(I,n);}n.parentNode.removeChild(n);return O;}H=N.createTextNode(K.data.substring(0,G.startNodeIndex));I=N.createTextNode(L.data.substring(G.endNodeIndex));var P=b(K.data.substring(G.startNodeIndex),M);var Q=[];for(var i=0,l=G.innerNodes.length;i<l;++i){var R=G.innerNodes[i];var S=b(R.data,M);R.parentNode.replaceChild(S,R);Q.push(S);}var T=b(L.data.substring(0,G.endNodeIndex),M);J=K.parentNode;J.insertBefore(H,K);J.insertBefore(P,K);J.removeChild(K);J=L.parentNode;J.insertBefore(T,L);J.insertBefore(I,L);J.removeChild(L);return T;};}function u(a){var b=a.parentNode;b.insertBefore(a.firstChild,a);a.parentNode.removeChild(a);}function q(a){var b=n.getElementsByTagName('*'),l=[];a=typeof a=="number"?""+a:null;for(var i=0;i<b.length;i++){var G=b[i],H=G.getAttribute('data-mce-index');if(H!==null&&H.length){if(H===a||a===null){l.push(G);}}}return l;}function r(a){var i=d.length;while(i--){if(d[i]===a){return i;}}return-1;}function v(a){var b=[];w(function(l,i){if(a(l,i)){b.push(l);}});d=b;return this;}function w(a){for(var i=0,l=d.length;i<l;i++){if(a(d[i],i)===false){break;}}return this;}function x(a){if(d.length){o(n,d,p(a));}return this;}function y(a,b){if(t&&a.global){while((m=a.exec(t))){d.push(j(m,b));}}return this;}function z(a){var i,b=q(a?r(a):null);i=b.length;while(i--){u(b[i]);}return this;}function A(a){return d[a.getAttribute('data-mce-index')];}function B(a){return q(r(a))[0];}function C(a,l,b){d.push({start:a,end:a+l,text:t.substr(a,l),data:b});return this;}function D(a){var b=q(r(a));var i=e.dom.createRng();i.setStartBefore(b[0]);i.setEndAfter(b[b.length-1]);return i;}function E(a,t){var b=D(a);b.deleteContents();if(t.length>0){b.insertNode(e.dom.doc.createTextNode(t));}return b;}function F(){d.splice(0,d.length);z();return this;}t=k(n);return{text:t,matches:d,each:w,filter:v,reset:F,matchFromElement:A,elementFromMatch:B,find:y,add:C,wrap:x,unwrap:z,replace:E,rangeFromMatch:D,indexOf:r};};});
