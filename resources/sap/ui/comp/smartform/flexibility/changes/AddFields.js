/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2016 SAP SE. All rights reserved
 */
sap.ui.define(['jquery.sap.global','sap/ui/fl/Utils','sap/ui/fl/changeHandler/Base'],function(q,U,B){"use strict";var A=function(){};A.prototype=q.sap.newObject(B.prototype);A.prototype.applyChange=function(c,g){var C=c.getDefinition();if(C.texts&&C.content&&C.content.field&&C.content.field.id&&C.content.field.jsTypes&&C.content.field.value&&C.content.field.valueProperty){q.sap.require("sap.ui.comp.smartform.GroupElement");var G=new sap.ui.comp.smartform.GroupElement(C.content.field.id);if(G.setLabel){G.setLabel(C.texts["fieldLabel0"].value);}for(var i=0;i<C.content.field.jsTypes.length;i++){var v=C.content.field.value[i];var p=C.content.field.valueProperty[i];var e=C.content.field.entitySet;var V=this._getControlClass(C.content.field.jsTypes[i]);var o=new V();if(o){if(v&&p){o.bindProperty(p,v);}if(o.setTextLabel){o.setTextLabel(C.texts["fieldLabel"+i].value);}if(e&&o.setEntitySet){o.setEntitySet(e);}G.addElement(o);}}if(g&&g.insertGroupElement){g.insertGroupElement(G,C.content.field.index);}else{throw new Error("no parent group provided for adding the field");}}else{U.log.error("Change does not contain sufficient information to be applied: ["+C.layer+"]"+C.namespace+"/"+C.fileName+"."+C.fileType);}};A.prototype.completeChangeContent=function(c,s){var C=c.getDefinition();if(s.fieldLabels){for(var i=0;i<s.fieldLabels.length;i++){var f="fieldLabel"+i;this.setTextInChange(C,f,s.fieldLabels[i],"XFLD");}}else{throw new Error("oSpecificChangeInfo.fieldLabel attribute required");}if(!C.content){C.content={};}if(!C.content.field){C.content.field={};}if(s.fieldValues){C.content.field.value=s.fieldValues;}else{throw new Error("oSpecificChangeInfo.fieldValue attribute required");}if(s.valueProperty){C.content.field.valueProperty=s.valueProperty;}else{throw new Error("oSpecificChangeInfo.valueProperty attribute required");}if(s.newControlId){C.content.field.id=s.newControlId;}else{throw new Error("oSpecificChangeInfo.newControlId attribute required");}if(s.jsTypes){C.content.field.jsTypes=s.jsTypes;}else{throw new Error("oSpecificChangeInfo.jsType attribute required");}if(s.index===undefined){throw new Error("oSpecificChangeInfo.index attribute required");}else{C.content.field.index=s.index;}if(s.entitySet){C.content.field.entitySet=s.entitySet;}};A.prototype._getControlClass=function(j){var r;q.sap.require(j);var s=j.split(".");var J=window;q.each(s,function(i,S){J=J[S];});if(typeof(J)=="function"){r=J;}return r;};return A;},true);
