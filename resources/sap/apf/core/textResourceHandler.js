/*!
 * SAP APF Analysis Path Framework
 * 
 * (c) Copyright 2012-2014 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.apf.core.textResourceHandler");jQuery.sap.require("sap.apf.utils.hashtable");jQuery.sap.require("jquery.sap.resources");(function(){'use strict';sap.apf.core.TextResourceHandler=function(I){var t=this;var m=I.messageHandler;var c=I.coreApi;var h=new sap.apf.utils.Hashtable(m);var H=new sap.apf.utils.Hashtable(m);this.getTextNotHtmlEncoded=function(L,p){if(typeof L==="string"){return b(L,p);}m.check((L!==undefined&&L.kind!==undefined),"Error - oLabel is not compatible");if(L.kind==="text"){m.check((L.key!==undefined),"Error - oLabel is not compatible");return a(L,p);}return"";};this.getTextHtmlEncoded=function(L,p){return jQuery.sap.encodeHTML(this.getTextNotHtmlEncoded(L,p));};this.getMessageText=function(r,p){var T;l(sap.apf.core.constants.resourceLocation.apfUiTextBundle,sap.apf.core.constants.resourceLocation.applicationMessageTextBundle);if(h.hasItem(sap.apf.core.constants.resourceLocation.applicationMessageTextBundle)){T=h.getItem(sap.apf.core.constants.resourceLocation.applicationMessageTextBundle).getText(r,p);if(T!==r){return T;}}return h.getItem(sap.apf.core.constants.resourceLocation.apfUiTextBundle).getText(r,p);};this.loadTextElements=function(e){var i,f;f=e.length;for(i=0;i<f;i++){H.setItem(e[i].TextElement,e[i].TextElementDescription);}};function l(A,o){var u;if(h.hasItem(A)===false){u=c.getResourceLocation(A);d(A,u);}u=c.getResourceLocation(o);if(u!==""&&h.hasItem(o)===false){d(o,u);}}function a(L,p){if(L.key===sap.apf.core.constants.textKeyForInitialText){return"";}l(sap.apf.core.constants.resourceLocation.apfUiTextBundle,sap.apf.core.constants.resourceLocation.applicationUiTextBundle);if(k(L.key,sap.apf.core.constants.resourceLocation.applicationUiTextBundle)){return h.getItem(sap.apf.core.constants.resourceLocation.applicationUiTextBundle).getText(L.key,p);}else if(k(L.key,sap.apf.core.constants.resourceLocation.apfUiTextBundle)){return h.getItem(sap.apf.core.constants.resourceLocation.apfUiTextBundle).getText(L.key,p);}else if(H.hasItem(L.key)){return H.getItem(L.key);}m.putMessage(m.createMessageObject({code:"3001",aParameters:[L.key],oCallingObject:t}));return"# text not available: "+L.key;}function b(e,p){if(e===sap.apf.core.constants.textKeyForInitialText){return"";}l(sap.apf.core.constants.resourceLocation.apfUiTextBundle,sap.apf.core.constants.resourceLocation.applicationUiTextBundle);if(k(e,sap.apf.core.constants.resourceLocation.applicationUiTextBundle)){return h.getItem(sap.apf.core.constants.resourceLocation.applicationUiTextBundle).getText(e,p);}else if(k(e,sap.apf.core.constants.resourceLocation.apfUiTextBundle)){return h.getItem(sap.apf.core.constants.resourceLocation.apfUiTextBundle).getText(e,p);}else if(H.hasItem(e)){return H.getItem(e);}m.putMessage(m.createMessageObject({code:"3001",aParameters:[e],oCallingObject:this}));return"# text not available: "+e;}function k(e,T){var o=h.getItem(T);var i;if(o){o.getText(e);}if(o&&o.aPropertyFiles&&o.aPropertyFiles.length>0&&o.aPropertyFiles[0].aKeys instanceof Array){for(i=0;i<o.aPropertyFiles.length;i++){if(jQuery.inArray(e,o.aPropertyFiles[i].aKeys)>=0){return true;}}}return false;}function d(K,u){var B=jQuery.sap.resources({url:u,includeInfo:sap.ui.getCore().getConfiguration().getOriginInfo()});h.setItem(K,B);}};}());
