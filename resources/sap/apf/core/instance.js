/*!
 * SAP APF Analysis Path Framework
 * 
 * (c) Copyright 2012-2014 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.apf.core.instance");jQuery.sap.require('sap.apf.utils.utils');jQuery.sap.require("sap.apf.core.utils.uriGenerator");jQuery.sap.require("sap.apf.core.metadata");jQuery.sap.require("sap.apf.core.metadataFacade");jQuery.sap.require("sap.apf.core.metadataProperty");jQuery.sap.require("sap.apf.core.ajax");jQuery.sap.require("sap.apf.core.odataRequest");jQuery.sap.require("sap.apf.core.messageHandler");jQuery.sap.require("sap.apf.core.entityTypeMetadata");jQuery.sap.require("sap.apf.core.metadataFactory");jQuery.sap.require("sap.apf.core.textResourceHandler");jQuery.sap.require("sap.apf.core.configurationFactory");jQuery.sap.require("sap.apf.core.path");jQuery.sap.require("sap.apf.core.sessionHandler");jQuery.sap.require("sap.apf.core.resourcePathHandler");jQuery.sap.require("sap.apf.core.persistence");jQuery.sap.require("sap.apf.core.readRequest");jQuery.sap.require("sap.apf.core.readRequestByRequiredFilter");jQuery.sap.require("sap.apf.core.utils.fileExists");(function(){'use strict';sap.apf.core.Instance=function(a){var t=this;var m=a.messageHandler;var s=a.startParameter;var r;var I={messageHandler:m,coreApi:t};var R;var M;var T;var c;var p;var S;var P;var f;this.destroy=function(){p.destroy();};this.ajax=function(d){return sap.apf.core.ajax(d);};this.odataRequest=function(d,e,E,B){sap.apf.core.odataRequestWrapper(m,d,e,E,B);};this.getStartParameterFacade=function(){return s;};this.getMessageHandler=function(){return m;};this.putMessage=function(d){return m.putMessage(d);};this.check=function(e,d,C){return m.check(e,d,C);};this.createMessageObject=function(C){return m.createMessageObject(C);};this.activateOnErrorHandling=function(O){m.activateOnErrorHandling(O);};this.setCallbackForMessageHandling=function(C){m.setMessageCallback(C);};this.setApplicationCallbackForMessageHandling=function(C){m.setApplicationMessageCallback(C);};this.getLogMessages=function(){return m.getLogMessages();};this.checkForTimeout=function(d){var e=sap.apf.core.utils.checkForTimeout(d);if(e){m.putMessage(e);}return e;};this.getUriGenerator=function(){return sap.apf.core.utils.uriGenerator;};this.getMetadata=function(A){return M.getMetadata(A);};this.getMetadataFacade=function(){return M.getMetadataFacade();};this.getEntityTypeMetadata=function(A,e){return M.getEntityTypeMetadata(A,e);};this.loadApplicationConfig=function(F){R.loadConfigFromFilePath(F);};this.loadTextElements=function(d){T.loadTextElements(d);};this.getApplicationConfigProperties=function(){return R.getConfigurationProperties();};this.getResourceLocation=function(d){return R.getResourceLocation(d);};this.getPersistenceConfiguration=function(){return R.getPersistenceConfiguration();};this.getApplicationConfigurationURL=function(){return R.getApplicationConfigurationURL();};this.getCategories=function(){return c.getCategories();};this.existsConfiguration=function(i){return c.existsConfiguration(i);};this.getStepTemplates=function(){return c.getStepTemplates();};this.getFacetFilterConfigurations=function(){return c.getFacetFilterConfigurations();};this.getNavigationTargets=function(){return c.getNavigationTargets();};this.createStep=function(d,e,g){var h;m.check(d!==undefined&&typeof d==="string"&&d.length!==0,"sStepID is  unknown or undefined");h=c.createStep(d,g);p.addStep(h,e);return h;};this.getSteps=function(){return p.getSteps();};this.moveStepToPosition=function(d,n,e){p.moveStepToPosition(d,n,e);};this.updatePath=function(d,C){p.update(d,C);};this.removeStep=function(d,e){p.removeStep(d,e);};this.resetPath=function(d){if(d){r=p.serialize();}if(p){p.destroy();}p=new sap.apf.core.Path(I);};this.restoreOriginalPath=function(){if(r){p.destroy();p=new sap.apf.core.Path(I);p.deserialize(r);}};this.stepIsActive=function(d){return p.stepIsActive(d);};this.serializePath=function(){return p.serialize();};this.deserializePath=function(d){p.deserialize(d);};this.getTextNotHtmlEncoded=function(l,d){return T.getTextNotHtmlEncoded(l,d);};this.getTextHtmlEncoded=function(l,d){return T.getTextHtmlEncoded(l,d);};this.isInitialTextKey=function(d){return(d===sap.apf.core.constants.textKeyForInitialText);};this.getMessageText=function(C,d){return T.getMessageText(C,d);};this.getXsrfToken=function(d){return S.getXsrfToken(d);};this.setDirtyState=function(d){S.setDirtyState(d);};this.isDirty=function(){return S.isDirty();};this.setPathName=function(n){S.setPathName(n);};this.getPathName=function(){return S.getPathName();};this.getCumulativeFilter=function(){return a.getCumulativeFilter();};this.createReadRequest=function(d){var e=c.createRequest(d);var g;if(typeof d==='string'){g=c.getConfigurationById(d);}else{g=d;}return new sap.apf.core.ReadRequest(I,e,g.service,g.entityType);};this.createReadRequestByRequiredFilter=function(d){var e=c.createRequest(d);var g;if(typeof d==='string'){g=c.getConfigurationById(d);}else{g=d;}return new sap.apf.core.ReadRequestByRequiredFilter(I,e,g.service,g.entityType);};this.loadMessageConfiguration=function(d,e){m.loadConfig(d,e);};this.loadAnalyticalConfiguration=function(C){c.loadConfig(C);};this.savePath=function(d,e,g,h){var i;var n;var C;var E;if(typeof d==='string'&&typeof e==='string'&&typeof g==='function'){i=d;n=e;C=g;E=h;this.setPathName(n);P.modifyPath(i,n,C,E);}else if(typeof d==='string'&&typeof e==='function'){n=d;C=e;E=g;this.setPathName(n);P.createPath(n,C,E);}else{m.putMessage(sap.apf.core.createMessageObject({code:"5027",aParameters:[d,e,g]}));}};this.readPaths=function(C){P.readPaths(C);};this.openPath=function(d,C,n){function l(e,E,g){if(!g&&r){r=undefined;}if(!g){t.setPathName(e.path.AnalysisPathName);}C(e,E,g);}return P.openPath(d,l,n);};this.deletePath=function(d,C){P.deletePath(d,C);};this.createFilter=function(d){return new sap.apf.utils.Filter(m,d);};this.getActiveStep=function(){return p.getActiveSteps()[0];};this.getCumulativeFilterUpToActiveStep=function(){return p.getCumulativeFilterUpToActiveStep();};this.setActiveStep=function(d){p.makeStepActive(d);var A=p.getActiveSteps();var i;for(i=0;i<A.length;++i){p.makeStepInactive(A[i]);}return p.makeStepActive(d);};this.createFirstStep=function(d,e,g){var i=false;var h;h=t.getStepTemplates();h.forEach(function(j){i=j.id===d?true:i;});if(!i){m.putMessage(m.createMessageObject({code:'5036',aParameters:[d]}));}else{t.createStep(d,g,e);}};this.getFunctionCreateRequest=function(){return c.createRequest;};T=new sap.apf.core.TextResourceHandler(I);m.setTextResourceHandler(T);if(a.manifests){I.manifests=a.manifests;}f=new sap.apf.core.utils.FileExists();c=new sap.apf.core.ConfigurationFactory(I);var o={entityTypeMetadata:sap.apf.core.EntityTypeMetadata,hashtable:sap.apf.utils.Hashtable,metadata:sap.apf.core.Metadata,metadataFacade:sap.apf.core.MetadataFacade,metadataProperty:sap.apf.core.MetadataProperty,messageHandler:I.messageHandler,coreApi:t,datajs:OData,configurationFactory:c,fileExists:f};M=new sap.apf.core.MetadataFactory(o);p=new sap.apf.core.Path(I);S=new sap.apf.core.SessionHandler(I);P=new sap.apf.core.Persistence(I);var b={coreApi:t,messageHandler:I.messageHandler,fileExists:f,manifests:a.manifests};R=new sap.apf.core.ResourcePathHandler(b);};}());
